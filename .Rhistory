install.packages("keras")
install.packages("tfdatasets")
dir.create("data")
untar("speech_commands_v0.01.tar.gz", exdir="data/speech_commands_v0.01")
library(stringr)
library(dplyr)
files <- fs::dir_ls(
path = "data/speech_commands_v0.01/",
recursive = TRUE,
glob = "*.wav"
)
files <- files[!str_detect(fles, "background_noise")]
files <- files[!str_detect(files, "background_noise")]
?fs
hold = files[1:10]
hold
str_extract(hold, "1/.*/")
str_extract(hold, "1/.*/") %>% str_replace_all("1/", "")
str_extract(hold, "1/.*/") %>% str_replace_all("1/", "") %>% str_replace_all("/", "")
str_extract(hold, "1/.*/") %>% str_replace_all("1/", "") %>% str_replace_all("/", "") %>% as.factor()
str_extract(hold, "1/.*/") %>% str_replace_all("1/", "") %>% str_replace_all("/", "") %>% as.factor()%>% as.integer()
df <- data_frame(
fname = files,
class = fname %>% str_extract("1/.*/") %>%
str_replace_all("1/", "") %>%
str_replace_all("/", ""),
class_id = class %>% as.factor() %>% as.integer() - 1L
)
df <- tibble(
fname = files,
class = fname %>% str_extract("1/.*/") %>%
str_replace_all("1/", "") %>%
str_replace_all("/", ""),
class_id = class %>% as.factor() %>% as.integer() - 1L
)
library(tfdatasets)
